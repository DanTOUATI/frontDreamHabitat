ec2-54-78-228-181.eu-west-1.compute.amazonaws.com {
  # Activer HTTPS automatique (Let's Encrypt)
  root * /usr/share/caddy
  file_server

  # Proxy pour les requêtes API vers le backend
  handle /api/* {
    reverse_proxy backend:8080
  }

  # Gérer les routes React (SPA)
  handle {
    try_files {path} /index.html
  }

  # Logs
  log {
    output file /var/log/caddy/access.log
    format json
  }

  # Erreurs
  handle_errors {
    respond "{http.error.status_code} {http.error.status_text}" 500
  }
}

