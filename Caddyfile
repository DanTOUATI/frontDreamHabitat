dreamhabitat.victor-zhang.fr {
  # Activer HTTPS automatique
  root * /usr/share/caddy
  file_server

  # Proxy pour les requêtes API vers le backend
  handle /api/* {
    reverse_proxy app:8080
  }

  # Gérer les routes React (SPA)
  handle {
    try_files {path} /index.html
  }

  # Logs d'accès
  log {
    output file /var/log/caddy/access.log
    format json
  }

  # Gestion des erreurs
  handle_errors {
    respond "{http.error.status_code} {http.error.status_text}" 500
  }
}
